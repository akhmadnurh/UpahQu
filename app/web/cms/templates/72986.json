{"title":"user-read-perizinan","type":"cms-template","lang":"","status":"SYSTEM","parent_id":"53726","content":{"type":"API","structure":"","server_on_load":"async ({\n  template,\n  params,\n  render,\n  db,\n  req,\n  reply,\n  user,\n  log,\n  ext,\n  isDev,\n}: Server) => {\n  const { id_pengguna } = req.body;\n  // const id_pengguna = 7;\n  const perizinan = await db.perizinan.findMany({\n    where: {\n      id_pengguna: id_pengguna,\n    },\n    include: {\n      status_pengajuan: true,\n    },\n    orderBy: {\n      id_perizinan: \"desc\",\n    },\n  });\n\n  reply.send({\n    perizinan: perizinan,\n  })\n}","figma":{}},"slug":"/api/user/r-perizinan","site":"*","id":"72986"}