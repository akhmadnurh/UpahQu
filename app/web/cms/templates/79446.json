{"content":{"type":"API","structure":"","server_on_load":"async ({\n  template,\n  params,\n  render,\n  db,\n  req,\n  reply,\n  user,\n  log,\n  ext,\n  isDev,\n}: Server) => {\n  const {\n    id_pengguna,\n    nama_pengguna,\n    jenis_izin,\n    keterangan,\n    tgl_mulai,\n    tgl_selesai,\n  } = req.body;\n  const id_pengajuan = 1;\n  // Tgl sekarang\n  const date = new Date();\n  const date_now =\n    date.getFullYear() +\n    \"-\" +\n    ((\"\" + (date.getMonth() + 1)).length < 2\n      ? \"0\" + (date.getMonth() + 1)\n      : \"\" + (date.getMonth() + 1)) +\n    \"-\" +\n    date.getDate();\n  const add = await db.$queryRaw(\n    \"insert into perizinan(id_pengguna, jenis_perizinan, keterangan, tgl_mulai, tgl_akhir, id_pengajuan, tgl_izin) values (\" +\n      id_pengguna +\n      \", '\" +\n      jenis_izin +\n      \"', '\" +\n      keterangan +\n      \"', '\" +\n      tgl_mulai +\n      \"','\" +\n      tgl_selesai +\n      \"',\" +\n      id_pengajuan +\n      \", '\" +\n      date_now +\n      \"')\"\n  );\n\n  reply.send({\n    status: add ? \"success\" : \"error\",\n  })\n}","figma":{}},"title":"user-create-perizinan","type":"cms-template","lang":"","status":"SYSTEM","parent_id":"53726","slug":"/api/user/c-perizinan","site":"*","id":"79446"}